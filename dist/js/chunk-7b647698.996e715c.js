(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7b647698"],{"00eb":function(t,e,n){},"00fb":function(t,e,n){"use strict";var a={name:"BasicField"},i=n("2877"),r=Object(i.a)(a,function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"field"},[t._t("default")],2)},[],!1,null,null,null);e.a=r.exports},"39ec":function(t,e,n){"use strict";var a=n("464f"),i={name:"Form",props:{formId:{type:String,default:""},validateRule:{type:Object,default:null},successCallback:{type:Function,default:null}},mounted:function(){var t=this;this.validateRule&&this.$nextTick(function(){a.a.init(t.formId,t.validateRule,t.successCallback)})},methods:{validaForm:function(){a.a.validateForm(this.formId)}}},r=n("2877"),s=Object(r.a)(i,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{staticClass:"ui form",attrs:{id:t.formId}},[n("div",{staticClass:"ui stacked segment"},[t._t("default")],2),n("div",{staticClass:"ui error message"})])},[],!1,null,null,null);e.a=s.exports},"3a5c":function(t,e,n){},"464f":function(t,r,s){"use strict";(function(a){s.d(r,"a",function(){return n});var t=s("d4ec"),e=s("bee2"),n=(Object(e.a)(i,null,[{key:"validateForm",value:function(t){var e=a("#".concat(t));return e.form("validate form"),e.form("is valid")}},{key:"init",value:function(t,e,n){a("#".concat(t)).form({transition:"slide down",fields:e,onSuccess:function(){return n&&n(),!1}})}},{key:"notEmptyRule",value:function(t){return this._getTypeAndPrompt("empty","".concat(t,"不能为空"))}},{key:"_getRules",value:function(){return{rules:0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]}}},{key:"_getTypeAndPrompt",value:function(t,e){return{type:t,prompt:e}}},{key:"usernameRules",get:function(){return this._getRules([this._getTypeAndPrompt("minLength[4]","用户名的长度不能小于4位"),this._getTypeAndPrompt("maxLength[16]","用户名的长度不能大于16位"),this._getTypeAndPrompt("regExp[/^[0-9a-zA-Z]+$/]","用户名只能是数字和字母的组合")])}},{key:"passwordRules",get:function(){return this._getRules([this._getTypeAndPrompt("minLength[6]","密码的长度不能小于6位"),this._getTypeAndPrompt("maxLength[32]","密码的长度不能大于32位"),this._getTypeAndPrompt("regExp[/^[0-9a-zA-Z]+$/]","密码只能是数字和字母的组合")])}},{key:"repeatPasswordRules",get:function(){return this._getRules([this._getTypeAndPrompt("match[password]","重复输入的密码与密码不一致")])}},{key:"nicknameRules",get:function(){return this._getRules([this._getTypeAndPrompt("minLength[4]","昵称的长度不能小于4位"),this._getTypeAndPrompt("maxLength[16]","昵称的长度不能大于16位")])}},{key:"captchaRules",get:function(){return this._getRules([this._getTypeAndPrompt("exactLength[4]","验证码的长度必须为4位"),this._getTypeAndPrompt("regExp[/^[0-9a-zA-Z]+$/]","验证码中只包括数字和字母")])}}]),i);function i(){Object(t.a)(this,i)}}).call(this,s("1157"))},"5c26":function(t,e,n){"use strict";var a={name:"LeftIconField",components:{BasicField:n("00fb").a},props:{icon:{type:String,required:!0}}},i=n("2877"),r={name:"LeftIconInputField",components:{LeftIconField:Object(i.a)(a,function(){var t=this.$createElement,e=this._self._c||t;return e("BasicField",[e("div",{staticClass:"ui left icon input"},[e("i",{staticClass:"icon",class:this.icon}),this._t("default")],2)])},[],!1,null,null,null).exports},props:{icon:{type:String,required:!0},data:{type:String,required:!0},name:{type:String,default:""},type:{type:String,default:"text"},placeholder:{type:String,default:""}}},s=Object(i.a)(r,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("LeftIconField",{attrs:{icon:e.icon}},[n("input",{attrs:{name:e.name,type:e.type,placeholder:e.placeholder},domProps:{value:e.data},on:{input:function(t){return e.$emit("update:data",t.target.value)}}})])},[],!1,null,null,null);e.a=s.exports},"9ed6":function(t,e,n){"use strict";n.r(e);var a=(n("ac1f"),n("5319"),n("96cf"),n("1da1")),r=n("fe72"),i=n("464f"),s=n("da6c"),u=n("39ec"),c=n("5c26"),o={name:"Login",components:{BasicField:n("00fb").a,LeftIconInputField:c.a,Form:u.a,CaptchaInput:s.a},data:function(){return{loginForm:{username:"",password:"",code:"",uuid:""},captchaBaseUrl:""}},mounted:function(){this.setUsername()},methods:{jumpToRegister:function(){this.$router.replace("/register")},submitLogin:function(){var i=this;return Object(a.a)(regeneratorRuntime.mark(function t(){var e,n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(r.b)(i.loginForm);case 2:if(e=t.sent,n=e.success,a=e.data,n)return i.$store.commit("SET_USER",a.user),i.$store.commit("SET_TOKEN",a.token),t.next=10,i.$router.replace("/home");t.next=12;break;case 10:t.next=13;break;case 12:i.refreshCaptcha();case 13:case"end":return t.stop()}},t)}))()},setUsername:function(){var t=this.$router.currentRoute.query.username;t&&(this.loginForm.username=t)},refreshCaptcha:function(){this.$refs.loginCaptcha.getCaptchaImage()},validateRule:function(){return{username:i.a.usernameRules,password:i.a.passwordRules,code:i.a.captchaRules}},validaLoginForm:function(){this.$refs.loginForm.validaForm()}}},l=(n("f608"),n("2877")),d=Object(l.a)(o,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ui middle aligned center aligned grid fullHeight"},[n("div",{staticClass:"column"},[n("h2",{staticClass:"ui teal header"},[e._v(" 登录你的账户 ")]),n("Form",{ref:"loginForm",staticClass:"large",attrs:{"form-id":"loginForm","validate-rule":e.validateRule(),"success-callback":e.submitLogin}},[n("LeftIconInputField",{attrs:{icon:"user",data:e.loginForm.username,placeholder:"用户名",name:"username"},on:{"update:data":function(t){return e.$set(e.loginForm,"username",t)}}}),n("LeftIconInputField",{attrs:{icon:"lock",data:e.loginForm.password,placeholder:"密码",name:"password",type:"password"},on:{"update:data":function(t){return e.$set(e.loginForm,"password",t)}}}),n("BasicField",[n("CaptchaInput",{ref:"loginCaptcha",attrs:{uuid:e.loginForm.uuid},on:{"update:uuid":function(t){return e.$set(e.loginForm,"uuid",t)}},model:{value:e.loginForm.code,callback:function(t){e.$set(e.loginForm,"code",t)},expression:"loginForm.code"}})],1),n("div",{staticClass:"ui fluid large teal button",on:{click:e.validaLoginForm}},[e._v("登录")])],1),n("div",{staticClass:"ui message"},[e._v(" 还没有账户? "),n("a",{attrs:{href:"javascript:void(0)"},on:{click:e.jumpToRegister}},[e._v("注册")])])],1)])},[],!1,null,"65c7c954",null);e.default=d.exports},da6c:function(t,e,n){"use strict";var a=(n("96cf"),n("1da1")),r=n("fe72"),i={name:"CaptchaInput",props:{uuid:{type:String,required:!0},name:{default:"code",type:String}},data:function(){return{captchaBaseUrl:"",input:""}},mounted:function(){this.getCaptchaImage()},methods:{getCaptchaImage:function(){var i=this;return Object(a.a)(regeneratorRuntime.mark(function t(){var e,n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i.focusIfRefreshOldCaptcha(),i.clearInput(),t.next=4,Object(r.a)();case 4:e=t.sent,n=e.success,a=e.data,n&&(i.captchaBaseUrl="data:image/gif;base64,".concat(a.captchaBase64),i.$emit("update:uuid",a.uuid));case 8:case"end":return t.stop()}},t)}))()},focusIfRefreshOldCaptcha:function(){""!==this.uuid&&this.$refs.captchaInput.focus()},clearInput:function(){this.$emit("update:uuid",""),this.input=""}}},s=(n("f341"),n("2877")),u=Object(s.a)(i,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ui left icon input"},[n("i",{staticClass:"shield alternate icon"}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.input,expression:"input"}],ref:"captchaInput",attrs:{name:"code",placeholder:"验证码",type:"text"},domProps:{value:e.input},on:{input:[function(t){t.target.composing||(e.input=t.target.value)},function(t){return e.$emit("input",t.target.value)}]}}),n("img",{staticClass:"m-margin-l captcha",attrs:{src:e.captchaBaseUrl},on:{click:e.getCaptchaImage}})])},[],!1,null,"70db7126",null);e.a=u.exports},f341:function(t,e,n){"use strict";n("3a5c")},f608:function(t,e,n){"use strict";n("00eb")}}]);